<!--
 * @Author: your name
 * @Date: 2020-02-13 11:27:06
 * @LastEditTime: 2020-02-18 10:17:53
 * @LastEditors: Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: \tmall-nuxt\pages\boughtList.vue
 -->
<!--
 * @Author: your name
 * @Date: 2020-02-13 11:27:06
 * @LastEditTime : 2020-02-14 18:54:14
 * @LastEditors  : Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: \tmall-nuxt\pages\boughtList.vue
 -->
<template>
  <div id="page">
    <header class="mt-header" data-spm="a210b" data-spm-anchor-id="a1z09.2.0.a210b.67002e8dr3X1t4">
      <article>
        <div class="mt-logo">
          <a
            title="我的淘宝"
            href="/"
            class="mt-tblogo"
            data-spm="d1000351"
          ></a>
        </div>
        <nav class="mt-nav">
          <ul id="J_MtMainNav">
            <li>
              <a
                href="/"
                data-spm="d1000352"
              >首页</a>
              <i class="mt-arrow"></i>
            </li>
            <li class="J_MtNavSubTrigger">
              <a
                class="mt-nav-parent"
                href=""
              >
                账户设置
                <i>
                  <em></em>
                  <s></s>
                </i>
              </a>
              <i class="mt-arrow"></i>
              <div class="J_MtNavSub mt-nav-sub hide" style="opacity: 0; margin-top: -15px;">
                <div class="mt-nav-arr"></div>
                <dl class="mt-nav-sub-col1">
                  <dt>安全设置</dt>
                  <dd>
                    <p>
                      <a
                        data-spm="11"
                        href="//110.taobao.com/account/product_validate.htm?type=password"
                      >修改登录密码</a>
                    </p>
                    <p>
                      <a data-spm="12" href="//110.taobao.com/account/rebind_phone_begin.htm">手机绑定</a>
                    </p>
                    <p>
                      <a data-spm="13" href="//110.taobao.com/product/question_set.htm">密保问题设置</a>
                    </p>
                    <p>
                      <a
                        data-spm="10"
                        href="//member1.taobao.com/member/fresh/account_security.htm"
                      >其他</a>
                    </p>
                  </dd>
                </dl>
                <dl class="mt-nav-sub-col2">
                  <dt>个人资料</dt>
                  <dd>
                    <p>
                      <a
                        data-spm="8"
                        href="//member1.taobao.com/member/fresh/deliver_address.htm"
                      >收货地址</a>
                    </p>
                    <p>
                      <a data-spm="14" href="//i.taobao.com/user/baseInfoSet.htm">修改头像、昵称</a>
                    </p>
                    <p>
                      <a data-spm="15" href="//msg.taobao.com/message/message_set.htm">消息提醒设置</a>
                    </p>
                    <p>
                      <a data-spm="9" href="//i.taobao.com/user/privacy_set.htm">隐私设置</a>
                    </p>
                  </dd>
                </dl>
                <dl class="mt-nav-sub-col3">
                  <dt>账号绑定</dt>
                  <dd>
                    <p>
                      <a
                        data-spm="7"
                        href="//member1.taobao.com/member/fresh/account_management.htm"
                      >支付宝绑定</a>
                    </p>
                    <p>
                      <a
                        data-spm="16"
                        href="//member1.taobao.com/member/fresh/weibo_bind_management.htm"
                      >微博绑定</a>
                    </p>
                    <p>
                      <a
                        data-spm="17"
                        href="//t.taobao.com/cooperate/connect/connect_manager.htm"
                      >分享绑定</a>
                    </p>
                  </dd>
                </dl>
              </div>
            </li>
            <li class>
              <a
                class="mt-nav-parent"
                href="/"
                data-spm="d1000357"
              >消息</a>
              <i class="mt-arrow"></i>
            </li>
          </ul>
          <div class="search" id="J_Search" role="search">
            <div class="search-panel search-sns-panel-field">
              <form
                target="_blank"
                action="//s.taobao.com/search"
                name="search"
                id="J_TSearchForm"
                class="search-panel-focused"
              >
                <div class="search-button">
                  <button class="btn-search" type="submit">搜 索</button>
                </div>
                <div class="search-panel-fields">
                  <label for="q"></label>
                  <div class="search-combobox" id="ks-component167">
                    <div class="search-combobox-input-wrap">
                      <input
                        id="q"
                        name="q"
                        accesskey="s"
                        autofocus="true"
                        autocomplete="off"
                        x-webkit-speech
                        x-webkit-grammar="builtin:translate"
                        aria-haspopup="true"
                        aria-combobox="list"
                        role="combobox"
                        class="search-combobox-input"
                        aria-label="请输入搜索文字或从搜索历史中选择"
                      />
                    </div>
                  </div>
                </div>
                <input type="hidden" name="commend" value="all" />
                <input type="hidden" name="ssid" value="s5-e" autocomplete="off" />
                <input type="hidden" name="search_type" value="mall" autocomplete="off" />
                <input type="hidden" name="sourceId" value="tb.index" />
                <input type="hidden" name="area" value="c2c" />
                <input type="hidden" name="spm" value="a1z02.1.6856637.d4910789" />
              </form>
            </div>
          </div>
        </nav>
        <a id="J_Nav_Side" title="展开导航">
          <em></em>
        </a>
      </article>
    </header>
    <div id="content">
      <div id="mytaobao-panel" class="grid-c2">
        <div class="col-main" id="J_Col_Main">
          <div style="margin-left:120px"></div>

          <div style="margin-left:120px">
            <a style="display:none!important" id="tanx-a-mm_12852562_1778064_96170934"></a>
          </div>

          <div id="J_bought_main" style="margin-left:120px;min-height: 600px;">
            <div id="tp-bought-root" class="index-mod__root___3ZrD7">
              <el-tabs v-model="activeName" @tab-click="handleClick">
                <el-tab-pane name="0">
                  <template #label>所有订单</template>
                  <template #default>
                    <table class="bought-table-mod__table___3u4gN table-head-mod__table___17eFg">
                      <colgroup>
                        <col class="bought-table-mod__col1___17JqJ" />
                        <col class="bought-table-mod__col2___1Y_Kl" />
                        <col class="bought-table-mod__col3___SzfHd" />
                        <col class="bought-table-mod__col4___3pLN6" />
                        <col class="bought-table-mod__col5___3dqJ_" />
                        <col class="bought-table-mod__col6___ImeZT" />
                        <col class="bought-table-mod__col7___RQijo" />
                      </colgroup>
                      <tbody>
                        <tr>
                          <th>宝贝</th>
                          <th>单价</th>
                          <th>数量</th>
                          <th>商品操作</th>
                          <th>实付款</th>
                          <th>
                            <span
                              class="field-select-mod__select___1wyLH trade-select table-head-mod__status___SBEwU rc-select rc-select-enabled"
                            >
                              <span class="rc-select-selection rc-select-selection--single">
                                <span class="rc-select-selection__rendered">
                                  <span>交易状态</span>
                                </span>
                                <span class="rc-select-arrow" style="outline:none;">
                                  <b></b>
                                </span>
                              </span>
                            </span>
                          </th>
                          <th data-reactid=".0.4.1.0.6">交易操作</th>
                        </tr>
                      </tbody>
                    </table>
                    <order-item v-for="item of list" :key="item.id" v-bind="item"></order-item>
                  </template>
                </el-tab-pane>
                <el-tab-pane label="待付款" name="1">
                  <template #label>
                    待付款
                    <span v-if="amountList[1]" class="tabs-label">{{amountList[1]}}</span>
                  </template>
                  <table class="bought-table-mod__table___3u4gN table-head-mod__table___17eFg">
                    <colgroup>
                      <col class="bought-table-mod__col1___17JqJ" />
                      <col class="bought-table-mod__col2___1Y_Kl" />
                      <col class="bought-table-mod__col3___SzfHd" />
                      <col class="bought-table-mod__col4___3pLN6" />
                      <col class="bought-table-mod__col5___3dqJ_" />
                      <col class="bought-table-mod__col6___ImeZT" />
                      <col class="bought-table-mod__col7___RQijo" />
                    </colgroup>
                    <tbody>
                      <tr>
                        <th>宝贝</th>
                        <th>单价</th>
                        <th>数量</th>
                        <th>商品操作</th>
                        <th>实付款</th>
                        <th>
                          <span
                            class="field-select-mod__select___1wyLH trade-select table-head-mod__status___SBEwU rc-select rc-select-enabled"
                          >
                            <span class="rc-select-selection rc-select-selection--single">
                              <span class="rc-select-selection__rendered">
                                <span>交易状态</span>
                              </span>
                              <span class="rc-select-arrow" style="outline:none;">
                                <b></b>
                              </span>
                            </span>
                          </span>
                        </th>
                        <th data-reactid=".0.4.1.0.6">交易操作</th>
                      </tr>
                    </tbody>
                  </table>
                  <order-item v-for="item of list" :key="item.id" v-bind="item"></order-item>
                </el-tab-pane>
                <el-tab-pane label="待发货" name="2">
                  <template #label>
                    待发货
                    <span v-if="amountList[2]" class="tabs-label">{{amountList[2]}}</span>
                  </template>
                  <template>
                    <table class="bought-table-mod__table___3u4gN table-head-mod__table___17eFg">
                      <colgroup>
                        <col class="bought-table-mod__col1___17JqJ" />
                        <col class="bought-table-mod__col2___1Y_Kl" />
                        <col class="bought-table-mod__col3___SzfHd" />
                        <col class="bought-table-mod__col4___3pLN6" />
                        <col class="bought-table-mod__col5___3dqJ_" />
                        <col class="bought-table-mod__col6___ImeZT" />
                        <col class="bought-table-mod__col7___RQijo" />
                      </colgroup>
                      <tbody>
                        <tr>
                          <th>宝贝</th>
                          <th>单价</th>
                          <th>数量</th>
                          <th>商品操作</th>
                          <th>实付款</th>
                          <th>
                            <span
                              class="field-select-mod__select___1wyLH trade-select table-head-mod__status___SBEwU rc-select rc-select-enabled"
                            >
                              <span class="rc-select-selection rc-select-selection--single">
                                <span class="rc-select-selection__rendered">
                                  <span>交易状态</span>
                                </span>
                                <span class="rc-select-arrow" style="outline:none;">
                                  <b></b>
                                </span>
                              </span>
                            </span>
                          </th>
                          <th data-reactid=".0.4.1.0.6">交易操作</th>
                        </tr>
                      </tbody>
                    </table>
                    <order-item v-for="item of list" :key="item.id" v-bind="item"></order-item>
                  </template>
                </el-tab-pane>
                <el-tab-pane label="待收货" name="3">
                  <template #label>
                    待收货
                    <span v-if="amountList[3]" class="tabs-label">{{amountList[3]}}</span>
                  </template>
                  <template>
                    <table class="bought-table-mod__table___3u4gN table-head-mod__table___17eFg">
                      <colgroup>
                        <col class="bought-table-mod__col1___17JqJ" />
                        <col class="bought-table-mod__col2___1Y_Kl" />
                        <col class="bought-table-mod__col3___SzfHd" />
                        <col class="bought-table-mod__col4___3pLN6" />
                        <col class="bought-table-mod__col5___3dqJ_" />
                        <col class="bought-table-mod__col6___ImeZT" />
                        <col class="bought-table-mod__col7___RQijo" />
                      </colgroup>
                      <tbody>
                        <tr>
                          <th>宝贝</th>
                          <th>单价</th>
                          <th>数量</th>
                          <th>商品操作</th>
                          <th>实付款</th>
                          <th>
                            <span
                              class="field-select-mod__select___1wyLH trade-select table-head-mod__status___SBEwU rc-select rc-select-enabled"
                            >
                              <span class="rc-select-selection rc-select-selection--single">
                                <span class="rc-select-selection__rendered">
                                  <span>交易状态</span>
                                </span>
                                <span class="rc-select-arrow" style="outline:none;">
                                  <b></b>
                                </span>
                              </span>
                            </span>
                          </th>
                          <th data-reactid=".0.4.1.0.6">交易操作</th>
                        </tr>
                      </tbody>
                    </table>
                    <order-item v-for="item of list" :key="item.id" v-bind="item"></order-item>
                  </template>
                </el-tab-pane>
                <el-tab-pane label="待评价" name="4">
                  <template #label>
                    待评价
                    <span v-if="amountList[4]" class="tabs-label">{{amountList[4]}}</span>
                  </template>
                  <template>
                    <table class="bought-table-mod__table___3u4gN table-head-mod__table___17eFg">
                      <colgroup>
                        <col class="bought-table-mod__col1___17JqJ" />
                        <col class="bought-table-mod__col2___1Y_Kl" />
                        <col class="bought-table-mod__col3___SzfHd" />
                        <col class="bought-table-mod__col4___3pLN6" />
                        <col class="bought-table-mod__col5___3dqJ_" />
                        <col class="bought-table-mod__col6___ImeZT" />
                        <col class="bought-table-mod__col7___RQijo" />
                      </colgroup>
                      <tbody>
                        <tr>
                          <th>宝贝</th>
                          <th>单价</th>
                          <th>数量</th>
                          <th>商品操作</th>
                          <th>实付款</th>
                          <th>
                            <span
                              class="field-select-mod__select___1wyLH trade-select table-head-mod__status___SBEwU rc-select rc-select-enabled"
                            >
                              <span class="rc-select-selection rc-select-selection--single">
                                <span class="rc-select-selection__rendered">
                                  <span>交易状态</span>
                                </span>
                                <span class="rc-select-arrow" style="outline:none;">
                                  <b></b>
                                </span>
                              </span>
                            </span>
                          </th>
                          <th data-reactid=".0.4.1.0.6">交易操作</th>
                        </tr>
                      </tbody>
                    </table>
                    <order-item v-for="item of list" :key="item.id" v-bind="item"></order-item>
                  </template>
                </el-tab-pane>
              </el-tabs>
            </div>
          </div>
        </div>
        <div class="col-sub" id="J_Col_Sub">
          <div id="J_EMS" style="width:0;height:0;"></div>
          <aside class="mt-menu" id="J_MtSideMenu">
            <div class="mt-menu-tree">
              <dl class="mt-menu-item" data-spm="a2109">
                <dt class="fs14">全部功能</dt>
                <dd>
                  <a
                    href="//cart.taobao.com/cart.htm?nekot=1470211439694"
                    target="_blank"
                    role="menuitem"
                    data-spm="d1000367"
                  >我的购物车</a>
                </dd>
                <dd class="mt-menu-sub J_MtSideTree unfold">
                  <b class="mt-indicator J_MtIndicator">-</b>
                  <a
                    id="bought"
                    href="//trade.taobao.com/trade/itemlist/list_bought_items.htm?nekot=1470211439694"
                    data-spm="d1000368"
                    class="selected"
                  >已买到的宝贝</a>
                  <ul class="mt-menu-sub-content">
                    <li id="jinpai">
                      <a
                        href="//paimai.taobao.com/auctionList/my_auction_list.htm?nekot=1470211439694"
                        data-spm="d1000369"
                      >我的拍卖</a>
                    </li>
                    <li id="jipiao">
                      <a
                        href="//jipiao.trip.taobao.com/order_manager.htm?nekot=1470211439694"
                        role="menuitem"
                        data-spm="d1000370"
                      >机票酒店保险</a>
                    </li>
                    <li id="caipiao">
                      <a
                        href="//caipiao.taobao.com/lottery/order/my_all_lottery_order.htm?nekot=1470211439694"
                        data-spm="d1000371"
                      >我的彩票</a>
                    </li>
                    <li id="overseasTransport">
                      <a
                        href="//consign.i56.taobao.com/user/consolidation/consolidatedGoods.htm?spm=a1z0f.7703789.0.0.5JrZ4R"
                      >官方集运</a>
                    </li>
                  </ul>
                </dd>
                <dd id="boughtShop">
                  <a
                    href="//favorite.taobao.com/list_bought_shops_n.htm?itemtype=0&amp;nekot=1470211439694"
                    data-spm="d1000373"
                  >购买过的店铺</a>
                </dd>
                <dd id="invoice" class="mt-menu-sub fold J_MtSideTree">
                  <b class="mt-indicator J_MtIndicator">+</b>
                  <a href="//inv.tmall.com/buyer/invoiceList.htm" data-spm="d1001380">我的发票</a>
                  <ul class="mt-menu-sub-content">
                    <li id="invoiceList">
                      <a href="//inv.tmall.com/buyer/invoiceInfoList.htm" data-spm="d1001381">开票信息</a>
                    </li>
                    <li>
                      <a href="//inv.tmall.com/buyer/invoiceList.htm" data-spm="d1001381">发票管理</a>
                    </li>
                  </ul>
                </dd>
                <dd id="favorite">
                  <a
                    href="//shoucang.taobao.com/collectList.htm?nekot=1470211439694"
                    data-spm="d1000374"
                  >我的收藏</a>
                </dd>
                <dd id="point">
                  <a
                    href="//vip.tmall.com/point/all?nekot=1470211439694"
                    target="_blank"
                    data-spm="d1000375"
                  >我的积分</a>
                </dd>
                <dd id="gotBonus">
                  <a href="//marketingop.taobao.com/cashHongbao.htm" data-spm="d1000376">我的优惠信息</a>
                </dd>
                <dd id="myRate">
                  <a
                    href="//rate.taobao.com/myRate.htm?nekot=1470211439694"
                    data-spm="d1000377"
                  >评价管理</a>
                </dd>
                <dd class="mt-menu-sub fold J_MtSideTree">
                  <b class="mt-indicator J_MtIndicator">+</b>
                  <a class="J_MtIndicator" href="#" data-spm="d1000378">退款维权</a>
                  <ul class="mt-menu-sub-content">
                    <li id="refundList">
                      <a
                        href="//refund2.taobao.com/dispute/buyerDisputeList.htm"
                        data-spm="d1000379"
                      >退款管理</a>
                    </li>
                    <li id="rulesManager">
                      <a href="//rights.taobao.com/complaint/buyerList.htm" data-spm="d1000383">投诉管理</a>
                    </li>
                    <li id="postedSuit">
                      <a
                        href="//archer.taobao.com/myservice/report/report_i_posted_list.htm?type=2&amp;user_role=2&amp;isarchive=false&amp;nekot=1470211439694"
                        data-spm="d1000381"
                      >举报管理</a>
                    </li>
                  </ul>
                </dd>
                <dd>
                  <a
                    data-spm="d1000391"
                    href="//www.taobao.com/markets/footmark/tbfoot"
                    target="_blank"
                    role="menuitem"
                  >我的足迹</a>
                </dd>
                <dd>
                  <a
                    href="//aliqin.tmall.com/flowwallet/index.htm"
                    target="_blank"
                    role="menuitem"
                  >流量钱包</a>
                </dd>
              </dl>
            </div>
          </aside>
        </div>
      </div>
      <el-pagination
        background
        layout="prev, pager, next"
        :total="amountList[activeName]"
        :page-size="15"
        @current-change="pageChange"
        style="margin-left: 40%;margin-bottom: 20px;"
      ></el-pagination>
    </div>
  </div>
</template>

<script>
import order from '../components/boughtList/order'
export default {
  components: {
    'order-item': order
  },
  layout: 'highNav',
  data() {
    return {
      activeName: '0'
    }
  },
  methods: {
    async handleClick({ paneName: status }) {
      status = status == '0' ? undefined : status
      let list = await this.$axios.$get('/order/findOrder', {
        params: { status }
      })
      this.list = list[0]
      this.amountList = list[1] ? list[1] : false
    },
    async pageChange(currentPage){
      let list = await this.$axios.$get('/order/findOrder', {
        params: { status,pageSkip:currentPage}
      })
      this.list = list[0]
      this.amountList = list[1] ? list[1] : false
    }
  },
  async asyncData({ $axios }) {
    let list = await $axios.$get('/order/findOrder')
    return { list: list[0], amountList: list[1] ? list[1] : false }
  }
}
</script>

<style lang="scss" scoped>
@import '@/assets/css/boughtList.css';
.tabs-label {
  color: #ff6000;
}
/deep/.el-tabs__item {
  font-size: 18px;
  font-weight: 700;
  font-family: Microsoft YaHei;
}
/deep/.el-tabs__item {
  &:hover {
    color: #ff6000;
  }
}
/deep/.el-tabs__item.is-active {
  color: #ff6000;
}
/deep/.el-tabs__active-bar {
  background: #ff6000;
}
#J_xiaomi_dialog .J_weak:hover {
  border-color: #f7931e;
  color: #f7931e;
}
#J_xiaomi_dialog .J_weak.active {
  border-color: #f7931e;
  background-color: #f7931e;
}
#J_xiaomi_dialog .J_weak .xiaomi-avatar {
  color: #f7931e;
}
#J_xiaomi_dialog .alicare-strong-card {
  border-color: #f7931e;
}
#J_xiaomi_dialog .alicare-strong-consult {
  background-color: #f7931e;
}
#alimm-pillar {
  width: 130px;
  height: 360px;
  position: fixed;
  top: 187px;
  margin-left: -140px;
}
#content {
  width: 1190px !important;
}
</style>